{"version":3,"file":"static/webpack/static/development/pages/login.js.cd15de3610691358e21c.hot-update.js","sources":["webpack:///./components/login-form.js"],"sourcesContent":["import axios from 'axios';\nimport 'yokui/css/positioning';\nimport { ErrorAlert } from 'yokui/react/alerts';\nimport { Form } from 'yokui/react/forms';\nimport { Input } from 'yokui/react/inputs';\nimport { PrimaryButton } from 'yokui/react/buttons';\nimport { FlexCol, Grid } from 'yokui/react/flex-grids';\n\nconst LoginForm = (props) => {\n\n  return (\n    <Form {...{\n      onSubmit: async ({initial, current}) => {\n        try {\n          current.username = current.email;\n          current.grant_type = 'password';\n          current.client_id = 'client1';\n          current.client_secret = 'secret';\n          delete current.email;\n\n          const response = await axios.post(process.env.API_URL + '/token', current);\n          document.cookie = `access_token=${response.data.token}`;\n          alert(document.cookie);\n\n        } catch(error) {\n          throw error.response;\n        }\n      },\n      onSubmitError: (error) => {\n        const { message } = error.data;\n        const errorField = {};\n\n        message.forEach((element) => {\n          if (element.property == 'name') {\n            errorField['name'] = element.constraints.length;\n          }\n\n          if (element.property == 'email') {\n            errorField['email'] = element.constraints.isEmail;\n          }\n\n          if (element.property == 'password') {\n            errorField['password'] = element.constraints.length;\n          }\n        });\n        return errorField;\n      },\n      fields: {\n        email: {\n          label: 'Email',\n          children: <Input type='email' placeholder='Email untuk verifikasi' />\n        },\n        password: {\n          label: 'Password',\n          children: <Input type='password' placeholder='Minimal 6 karakter' />\n        }\n      }\n    }}>\n      {({fields, state}) => {\n        const { errors } = state;\n\n        let showAlert = false;\n        if (Object.keys(errors).length > 0) {\n          showAlert = true;\n        }\n\n        return (\n          <div>\n            <Grid>\n              <FlexCol />\n              <FlexCol>\n                <ErrorAlert withIcon show={showAlert}>Pendaftaran gagal. Periksa lagi.</ErrorAlert>\n\n                {fields.email}\n                {fields.password}\n\n                <div className='float-right'>\n                  <PrimaryButton {...{\n                    type: 'submit',\n                  }}>Masuk</PrimaryButton>\n                </div>\n              </FlexCol>\n              <FlexCol />\n            </Grid>\n          </div>\n        )\n      }}\n    </Form>\n  )\n}\n\nexport default LoginForm;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AANA;AAAA;AACA;AADA;AAQA;AACA;AACA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAgBA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AALA;AApCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+CA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAGA;AACA;AACA;;;;A","sourceRoot":""}